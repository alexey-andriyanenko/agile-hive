syntax = "proto3";

option csharp_namespace = "ProjectService.Contracts";

package project;

import "google/protobuf/empty.proto";
import "project-types.proto";

service ProjectService {
  rpc Create (CreateProjectRequest) returns (project.types.ProjectDto);
  rpc GetById (GetProjectByIdRequest) returns (project.types.ProjectDto);
  rpc GetMany (GetManyProjectsRequest) returns (GetManyProjectsResponse);
  rpc Update (UpdateProjectRequest) returns (project.types.ProjectDto);
  rpc Delete (DeleteProjectRequest) returns (google.protobuf.Empty);
}

message CreateProjectRequest {
  string name = 1;
  string description = 2;
  string organization_id = 3;
  string slug = 4;
  project.types.ProjectVisibility visibility = 5;
  repeated CreateProjectWithUserItem members = 6;
}

message CreateProjectWithUserItem {
  string project_id = 1;
  string user_id = 2;
  project.types.ProjectMemberRole role = 3;
}

message GetProjectByIdRequest {
  string project_id = 1;
  string organization_id = 2;
}

message GetManyProjectsRequest {
  string organization_id = 1;
  repeated string project_ids = 2;
}

message GetManyProjectsResponse {
  repeated project.types.ProjectDto projects = 1;
}

message UpdateProjectRequest {
  string project_id = 1;
  string organization_id = 2;
  string name = 3;
  string description = 4;
  string slug = 5;
  project.types.ProjectVisibility visibility = 6;
}

message DeleteProjectRequest {
  string project_id = 1;
  string organization_id = 2;
}